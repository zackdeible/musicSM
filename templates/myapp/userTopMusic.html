{% extends "front.html" %}

{% load static %}

{% block links %}
<!-- PUT ANY CSS LINKS IN HERE -->
<link rel="stylesheet" href="{% static "css/main.css" %}">
{% endblock links %}


{% block body %}

<body>


<!-- PUT YOUR HOME IN HERE -->

 <div class="container">
    <div class="header">
    <nav class="nav nav-classic nav-shadow">
      <form id="topSongForm" action="/songs/" method="post">
      {% csrf_token %}
      <input type="hidden" name="token" value="{{ token }}">

      <a class="nav-item nav-link active text-dark" href=# id="topSongButton" onclick="document.getElementById('topSongForm').submit();"> Songs </a>
    </form>
      
      <form id="extractForm" action="/extractPlaylist/" method="post">
    {% csrf_token %}
    <input type="hidden" name="token" value="{{ token }}">
    <a href="#"class="nav-item nav-link" id="extractPlaylistButton" onclick="document.getElementById('extractForm').submit();">Playlist</a>
   
  </form>
      
    
        <form id="topArtistForm" action="/artists/" method="post">
      {% csrf_token %}
      <input type="hidden" name="token" value="{{ token }}">
      <a href="#" class="nav-item nav-link" id="topArtistButton" onclick="document.getElementById('topArtistForm').submit();">Artists </a>
    </form>
    </nav>
      


            

      </div>

  <div class="container">

  
  <!-- PUT YOUR Top 5 Songs IN HERE -->
  <div class="row">
    <div class="col-sm">
      <h3 class ="text-warning";>Top Songs</h3>


        {% for track in searchResults.items %}
        <ul class="list-group bg-transparent">
          <li class="list-group-item bg-transparent">
            <div class="row d-flex flex-wrap align-items-center">

            <div class="col-2 col-lg-1 album-pic">

                  <img src="{{ track.album.images.2.url }}" width="90" height="90" alt="">
              </div>
              <div class="col-1 ml-2">
                </div>

              <div class="col-8 col-lg-9">
                <div class="row">
                  <div class="col ml-6">
                    <a class="text-dark"style="color: white">{{ track.name }}</a>
                  </div>

                  <div class="col-12 ml-6">
                    <a>{{ track.artists.0.name }}</a>
                  </div>
                </div>
              </div>

          </li>

        </ul>
        {% endfor %}



    </div>


  </div>


   
  

  </div>

  </body>
  {% endblock body %}




  {% block scripts %}
  <!-- PUT JS LINKS IN HERE -->
  <script type="text/javascript">
    window.onload=()=> {
      console.log("Hello WOrld")
      console.log('{{ token }}')
      localStorage.setItem('token','{{ token }}')
    }

    // $('#extractPlaylistButton').click((event) => {
    //   event.preventDefault();
    //   console.log('clicked extract playlist');
    //   $.ajax({
    //     type: 'GET',
    //     url: '/extractPlaylist/',
    //     data: {
    //       csrfmiddlewaretoken: "{{ csrf_token }}",
    //       token: localStorage.getItem('token')
    //     },
    //     success : () => {
    //       console.log('SUCCESS');
    //       window.location.href = '/extractPlaylist'
    //     }
    //   })
    // })

  </script>
  {% endblock scripts %}
